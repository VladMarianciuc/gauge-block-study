---
title: "GaugeBlock Finder"
format:
  html:
    grid: 
      body-width: 1400px
    resources: 
      - shinylive-sw.js
filters: 
  - shinylive
editor: visual
theme: flatly
smooth-scroll: true
code-fold: show
---

Enter a number and see if you can obtain it with gauges from an 81 Ford-Johansson gauge block set.

Please take into consideration the following:

-   Numbers from 0.1 - 26.4295 range can be obtained

-   From 0.1 - 0.2 numbers can be obtained with increment of 0.001

-   From 0.2 - 26.3295 numbers can be obtained with increment of 0.0001

-   From 26.3295 - 26.4295 numbers can be obtained with increment of 0.001

-   Besides that, you can obtain 0 by not using anything, 26.5295 by using all the blocks and 0.05 by using the block 0.05

```{shinylive-r}
#| standalone: true
#| viewerHeight: 600
library(shiny)
library(bslib)

data <- read.csv("https://raw.githubusercontent.com/VladMarianciuc/gauge-block-study/main/cleaned2.csv")

# Define UI
ui <- fluidPage(
  titlePanel("Gauge Block Combination Calculator"),
  sidebarLayout(
    sidebarPanel(
      textInput("numar_input", "Enter a floating number (up to 4 decimals):", value = "0.0000"),
      actionButton("submit", "Submit")
    ),
    mainPanel(
      textOutput("result_text"),
      textOutput("result_combination"),
      htmlOutput("result_gauge_blocks")  # Use htmlOutput instead of textOutput
    )
  )
)

# Define server logic
server <- function(input, output) {
  filteredData <- eventReactive(input$submit, {
    numar <- as.numeric(input$numar_input)
    df <- data[data$numar == numar, c("combinatii", "nr_comb")]
    if (nrow(df) == 0) {
      return(NULL)
    } else {
      return(df)
    }
  })
  
  output$result_text <- renderText({
    if (input$submit > 0) {
      if (is.null(filteredData())) {
        return("Number is not in the obtainable range")
      } else {
        return("The number can be obtained with the following combination of gauge blocks:")
      }
    }
  })
  
  output$result_combination <- renderText({
    if (input$submit > 0 && !is.null(filteredData())) {
      paste(filteredData()$combinatii[1])
    }
  })
  
  output$result_gauge_blocks <- renderUI({
    if (input$submit > 0 && !is.null(filteredData())) {
      HTML(paste("<br>The above combination uses <strong>", filteredData()$nr_comb[1], "</strong> gauge blocks"))
    }
  })
}

# Run the application 
shinyApp(ui = ui, server = server)
```
